/*********************************************
 * OPL 12.8.0.0 Model
 * Author: sev
 * Creation Date: 6 mars 2019 at 10:14:52
 *********************************************/

using CP;

 int N=...;
 tuple pair
{
 int A;
 int B;  
};
{pair} matches = {<a,b> | a in 1..N-1, b in a+1..N};
range days = 1..N-1;
range periods = 1..N div 2;

dvar int dm[matches] in days;
dvar int pm[matches] in periods;

subject to {
	// -------- pas deux matchs le même jour et à la même période
	forall (m1 in matches, m2 in matches)
		pm[m1] != pm[m2] ||	dm[m1] != dm[m2];
	
 	// -------- chaque joueur joue une fois par jour
 	forall (d in days, a in 1..N)
 		 count(all(m in matches : (m.A == a || m.B == a)) dm[m], d) == 1;
 	
	// -------- chaque joueur joue au plus deux fois par période
	forall (p in days, a in 1..N)
 		 count(all(m in matches : (m.A == a || m.B == a)) pm[m], p) <= 2;
 	
}

execute  {
	for(var d in days) {
		for(var p in periods) {
			for(var m in matches) {
				if (dm[m] == d && pm[m] == p)
					writeln("Jour "+d+", période "+p+" : "+m);
			}
		}
	}
}